<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>信息安全管理与评估学习过程 | 医疗兵的博客</title><meta name="author" content="医疗兵"><meta name="copyright" content="医疗兵"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="设备初始化先配置设备再连线，防止前期配置的时候出现环路几种初始化的命令： 123456Switch#set default	#设置为默认设置Switch#write		#保存Switch#reload		#重新加载Router#delete startup-config	#删除运行的配置Router#reboot					#重启 防火墙DCFW-1800E恢复出厂设置命令： 1DCFW-1800#">
<meta property="og:type" content="article">
<meta property="og:title" content="信息安全管理与评估学习过程">
<meta property="og:url" content="https://12404.top/2023/03/21/2023-03-21%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E7%AE%A1%E7%90%86%E4%B8%8E%E8%AF%84%E4%BC%B0%E5%AD%A6%E4%B9%A0%E8%BF%87%E7%A8%8B/index.html">
<meta property="og:site_name" content="医疗兵的博客">
<meta property="og:description" content="设备初始化先配置设备再连线，防止前期配置的时候出现环路几种初始化的命令： 123456Switch#set default	#设置为默认设置Switch#write		#保存Switch#reload		#重新加载Router#delete startup-config	#删除运行的配置Router#reboot					#重启 防火墙DCFW-1800E恢复出厂设置命令： 1DCFW-1800#">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://1240-img.oss-cn-chengdu.aliyuncs.com/img/%E9%BB%91%E8%89%B2.png">
<meta property="article:published_time" content="2023-03-21T14:57:00.000Z">
<meta property="article:modified_time" content="2023-03-28T13:50:32.595Z">
<meta property="article:author" content="医疗兵">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://1240-img.oss-cn-chengdu.aliyuncs.com/img/%E9%BB%91%E8%89%B2.png"><link rel="shortcut icon" href="https://s2.loli.net/2022/09/19/UWzRTS7beuDvFYd.jpg"><link rel="canonical" href="https://12404.top/2023/03/21/2023-03-21%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E7%AE%A1%E7%90%86%E4%B8%8E%E8%AF%84%E4%BC%B0%E5%AD%A6%E4%B9%A0%E8%BF%87%E7%A8%8B/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '信息安全管理与评估学习过程',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-03-28 21:50:32'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.4.2"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://s3.bmp.ovh/imgs/2022/09/20/1ecb950bcff7fba0.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">22</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">19</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">5</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> 歌曲</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://1240-img.oss-cn-chengdu.aliyuncs.com/img/%E9%BB%91%E8%89%B2.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">医疗兵的博客</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> 歌曲</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">信息安全管理与评估学习过程</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-03-21T14:57:00.000Z" title="发表于 2023-03-21 22:57:00">2023-03-21</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-03-28T13:50:32.595Z" title="更新于 2023-03-28 21:50:32">2023-03-28</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="信息安全管理与评估学习过程"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="设备初始化"><a href="#设备初始化" class="headerlink" title="设备初始化"></a>设备初始化</h2><p>先配置设备再连线，防止前期配置的时候出现环路<br>几种初始化的命令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Switch#set default	#设置为默认设置</span><br><span class="line">Switch#write		#保存</span><br><span class="line">Switch#reload		#重新加载</span><br><span class="line"></span><br><span class="line">Router#delete startup-config	#删除运行的配置</span><br><span class="line">Router#reboot					#重启</span><br></pre></td></tr></table></figure>
<p>防火墙DCFW-1800E恢复出厂设置命令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DCFW-1800#unset all</span><br></pre></td></tr></table></figure>

<h2 id="IP地址表"><a href="#IP地址表" class="headerlink" title="IP地址表"></a>IP地址表</h2><p><img src="https://1240-img.oss-cn-chengdu.aliyuncs.com/img-time/2022-12/202303212333455.png" alt="image-20230321233313097"></p>
<h2 id="任务1：网络平台搭建"><a href="#任务1：网络平台搭建" class="headerlink" title="任务1：网络平台搭建"></a>任务1：网络平台搭建</h2><table>
<thead>
<tr>
<th><strong>题号</strong></th>
<th><strong>网络需求</strong></th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>按照IP地址规划表，对防火墙的名称、各接口IP地址进行配置。</td>
</tr>
<tr>
<td>2</td>
<td>按照IP地址规划表，对三层交换机的名称进行配置，创建VLAN并将相应接口划入VLAN, 对各接口IP地址进行配置。</td>
</tr>
<tr>
<td>3</td>
<td>按照IP地址规划表，对无线交换机的名称进行配置，创建VLAN并将相应接口划入VLAN,对接口IP地址进行配置。</td>
</tr>
<tr>
<td>4</td>
<td>按照IP地址规划表，对网络日志系统的名称、各接口IP地址进行配置。</td>
</tr>
<tr>
<td>5</td>
<td>按照IP地址规划表，对WEB应用防火墙的名称、各接口IP地址进行配置。</td>
</tr>
</tbody></table>
<h3 id="1-防火墙配置名称，接口，IP地址"><a href="#1-防火墙配置名称，接口，IP地址" class="headerlink" title="1.防火墙配置名称，接口，IP地址"></a>1.防火墙配置名称，接口，IP地址</h3><p>进入防火墙WebUI配置，地址可以命令行配置eth0/0地址，配置同网段后用浏览器进入<br>防火墙查看配置命令：<br><code>show configuration interface</code><br>在IP地址表里可以发现，FW和CS有双端口直连，所以存在端口聚合<br>端口聚合：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">FW(config)# interface aggregate1	#创建端口集聚1</span><br><span class="line">FW(config-if-agg1)# ip add 0.0.0.0/0  </span><br><span class="line">FW(config-if-agg1)# lacp enable    	#打开lcap动态协商</span><br><span class="line">FW(config-if-agg1)# no shutdown </span><br><span class="line">FW(config-if-agg1)# exit</span><br><span class="line">FW(config)# int aggregate1.113		#进入集聚子接口113</span><br><span class="line">FW(config-if-agg1.113)# zone trust 	#配置区域</span><br><span class="line">FW(config-if-agg1.113)# ip add 10.1.0.254/30</span><br><span class="line">FW(config-if-agg1.113)# no shutdown </span><br><span class="line">FW(config-if-agg1.113)# exit</span><br><span class="line">FW(config)# interface aggregate1.114	#进入集聚子接口114</span><br><span class="line">FW(config-if-agg1.114)# zone trust 		#配置区域</span><br><span class="line">FW(config-if-agg1.114)# no shutdown </span><br><span class="line">FW(config-if-agg1.114)# ip add 10.2.0.254/30</span><br><span class="line">FW(config-if-agg1.114)# exit        </span><br><span class="line">FW(config)# interface ethernet0/1</span><br><span class="line">FW(config-if-eth0/1)# aggregate aggregate1 	#将接口加入集聚接口</span><br><span class="line">FW(config-if-eth0/1)# int e0/2</span><br><span class="line">FW(config-if-eth0/2)# aggregate aggregate1 </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="2-三层交换机配置名称，VLAN并配置端口，设置IP地址"><a href="#2-三层交换机配置名称，VLAN并配置端口，设置IP地址" class="headerlink" title="2.三层交换机配置名称，VLAN并配置端口，设置IP地址"></a>2.三层交换机配置名称，VLAN并配置端口，设置IP地址</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">hostname CS	#设置名称</span><br><span class="line">vlan 1;40;50-52;100;113-118 	#添加VLAN</span><br><span class="line">（忽略配置地址）</span><br><span class="line">端口聚合：</span><br><span class="line"> DCRS#config terminal </span><br><span class="line"> DCRS(config)#port-group 1            </span><br><span class="line"> DCRS(config)#int e1/0/1-2</span><br><span class="line"> DCRS(config-if-port-range)#switchport mode trunk </span><br><span class="line"> DCRS(config-if-port-range)#switchport trunk allowed vlan 49;50</span><br><span class="line"> DCRS(config-if-port-range)#port-group 1 mode active</span><br></pre></td></tr></table></figure>

<h2 id="任务2：网络安全设备配置与防护"><a href="#任务2：网络安全设备配置与防护" class="headerlink" title="任务2：网络安全设备配置与防护"></a>任务2：网络安全设备配置与防护</h2><h3 id="1-CS开启telnet登录功能"><a href="#1-CS开启telnet登录功能" class="headerlink" title="1.CS开启telnet登录功能"></a>1.CS开启telnet登录功能</h3><p>，用户名skills01，密码skills01，配置使用telnet方式登录终端界面前显示如下授权信息：“WARNING!!! Authorised access only, all of your done will be recorded! Disconnected IMMEDIATELY if you are not an authorised user! Otherwise, we retain the right to pursue the legal responsibility”； </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">banner login WARNING!!! Authorised access only, all of your done will be recorded! Disconnected IMMEDIATELY if you are not an authorised user! Otherwise, we retain the right to pursue the legal responsibility</span><br><span class="line">!</span><br><span class="line">username skills01 privilege 15 password 0 skills01	#设置名称权限和密码</span><br></pre></td></tr></table></figure>
<p>banner login            #连接以后显示紧跟在motd以后，在用户名和口令登录提示之前显示<br>banner motd           #连接后显示</p>
<h4 id="2-总部交换机SW配置简单网络管理协议"><a href="#2-总部交换机SW配置简单网络管理协议" class="headerlink" title="2.总部交换机SW配置简单网络管理协议"></a>2.总部交换机SW配置简单网络管理协议</h4><p>，计划启用V3版本，V3版本在安全性方面做了极大的扩充。配置引擎号分别为62001；创建认证用户为skills01，采用3des算法进行加密，密钥为：skills01，哈希算法为SHA，密钥为：skills01；加入组ABC，采用最高安全级别；配置组的读、写视图分别为：2022_R、2022_W；当设备有异常时，需要使用本地的VLAN100地址发送Trap消息至网管服务器10.51.0.203，采用最高安全级别； </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">cs(config)# snmp-server enable		#打开SNMP代理</span><br><span class="line">cs(config)# snmp-server enable traps#打开Trap</span><br><span class="line">cs(config)# snmp-server user skills01 ABC authPriv 3DES skills01 auth sha skills01</span><br><span class="line">#创建认证用户skills01，使用3des算法加密，密匙为skills01，哈希算法为sha，密匙为skills01；加入组ABC，使用最高加密；配置组的读，写视图分别为：2022_R 2022_W</span><br><span class="line"></span><br><span class="line">cs(config)# snmp-server group ABC authpriv read 2022_W write 2022_R</span><br><span class="line">#设置用户组ABC安全级别为最高的authpriv；设置读视图为2022_W ，写视图为2022_R</span><br><span class="line"></span><br><span class="line">cs(config)# snmp-server host 10.51.0.203 v3 authpriv 100</span><br><span class="line">#设置SNMP trap的接受服务器</span><br></pre></td></tr></table></figure>

<h4 id="3-对CS上VLAN40开启以下安全机制："><a href="#3-对CS上VLAN40开启以下安全机制：" class="headerlink" title="3.对CS上VLAN40开启以下安全机制："></a>3.对CS上VLAN40开启以下安全机制：</h4><p>   业务内部终端相互二层隔离，启用环路检测，环路检测的时间间隔为10s，发现环路以后关闭该端口，恢复时间为30分钟；如发现私设DHCP服务器则关闭该端口，配置防止ARP欺骗攻击；</p>
<p>端口隔离：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">启用端口隔离：</span><br><span class="line">DCRS(config)#isolate-port group 4 switchport interface e1/0/4    #端口加入隔离组</span><br><span class="line">DCRS(config)#isolate-port group 5 switchport interface e1/0/5   </span><br><span class="line">DCRS(config)#isolate-port group 6 switchport interface e1/0/6</span><br><span class="line">DCRS(config)#isolate-port group 7 switchport interface e1/0/7</span><br><span class="line">DCRS(config)#isolate-port group 8 switchport interface e1/0/8</span><br></pre></td></tr></table></figure>
<p>环路检测：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">DCRS(config)#loopback-detection trap enable</span><br><span class="line">DCRS(config)#loopback-detection interval-time 10 10   #端口环路时间间隔配置</span><br><span class="line">DCRS(config)#int e1/0/4-8                       </span><br><span class="line">DCRS(config-if-port-range)#loopback-detection specified-vlan 40   #指定VLAN环路检测</span><br><span class="line">DCRS(config-if-port-range)#loopback-detection control shutdown     #端口控制方式</span><br><span class="line">DCRS(config-if-port-range)#exit</span><br><span class="line">DCRS(config)#loopback-detection control-recovery timeout 3000    #环路自动恢复时间</span><br></pre></td></tr></table></figure>
<p>检测到在vlan40中私设DHCP服务器则关闭该端口<br>防止ARP欺骗：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">DCRS(config)#ip dhcp snooping enable   #开启DHCP snooping全局开关</span><br><span class="line">DCRS(config)#ip dhcp snooping binding enable    #开启DHCP snooping绑定开关</span><br><span class="line">DCRS(config)#ip dhcp snooping binding arp</span><br><span class="line">DCRS(config)#int e1/0/4-8</span><br><span class="line">DCRS(config-if-port-range)#ip dhcp snooping binding user-control   #端口绑定用户配置</span><br><span class="line">DCRS(config-if-port-range)#ip dhcp snooping action shutdown  #端口自动防御动作为shutoown</span><br></pre></td></tr></table></figure>

<h4 id="4-勒索蠕虫病毒席卷全球"><a href="#4-勒索蠕虫病毒席卷全球" class="headerlink" title="4.勒索蠕虫病毒席卷全球"></a>4.勒索蠕虫病毒席卷全球</h4><p>，爆发了堪称史上最大规模的网络攻击，通过对总部核心交换机CS所有业务VLAN下配置访问控制策略实现双向安全防护;</p>
<blockquote>
<p>MB服务端口和NetBIOS服务服务类端口做安全防护即可<br>SMB：445端口        NetBIOS：135，137，139端口<br>如果要使用协议和端口过滤，就需要使用扩展ACL而不是标准ACL</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ip access-list extended bd</span><br><span class="line">  permit ip any-source any-destination</span><br><span class="line">  deny tcp any-source any-destination d-port 135</span><br><span class="line">  deny tcp any-source any-destination d-port 137</span><br><span class="line">  deny tcp any-source any-destination d-port 139</span><br><span class="line">  deny tcp any-source any-destination d-port 445</span><br><span class="line">  exit</span><br><span class="line">Vacl ip access-group bingdu in vlan 10;20;30;40</span><br><span class="line">Vacl ip access-group bingdu out vlan 10;20;30;40</span><br></pre></td></tr></table></figure>

<h4 id="5-CS配置IPv6地址"><a href="#5-CS配置IPv6地址" class="headerlink" title="5.CS配置IPv6地址"></a>5.CS配置IPv6地址</h4><p>，使用相关特性实现VLAN50的IPv6终端可自动从网关处获得IPv6有状态地址；<br>WS配置IPv6地址，开启路由公告功能，路由器公告的生存期为2小时，确保VLAN30的IPv6终端可以获得IPv6无状态地址。</p>
<p>WS与CS之间配置RIPng， 使PC1与PC3可以通过IPv6通信；</p>
<p>IPv6业务地址规划如下，其它IPv6地址自行规划： </p>
<table>
<thead>
<tr>
<th><strong>业务</strong></th>
<th><strong>IPV6地址</strong></th>
</tr>
</thead>
<tbody><tr>
<td>VLAN30</td>
<td>2001:30::254/64</td>
</tr>
<tr>
<td>VLAN50</td>
<td>2001:50::254/64</td>
</tr>
</tbody></table>
<p>ws上的vlan100用于维持cs的vlan50和ws的vlan30通信，vlan100也规划ipv6</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">CS配置：</span><br><span class="line">CS(config)#int vlan 100</span><br><span class="line">CS(config-if-vlan100)#ipv6 address 2001::192:168:100:1/112</span><br><span class="line">CS(config-if-vlan100)#ipv6 route rip</span><br><span class="line">CS(config-if-vlan50)#int vlan 50</span><br><span class="line">CS(config-if-vlan50)#ipv6 address 2001:50::254/64</span><br><span class="line">CS(config-if-vlan50)#no ipv6 nd suppress-ra</span><br><span class="line">CS(config-if-vlan50)#ipv6 nd managed-config-flag	#配置通过有状态获取地址</span><br><span class="line">CS(config-if-vlan50)#ipv6 dhcp server 50</span><br><span class="line">CS(config-if-vlan50)#ipv6 dhcp pool 50</span><br><span class="line">CS(config-if-vlan50)#network-adderdd 2001:50::254 64</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">WS配置：</span><br><span class="line">WS(config)#int vlan 100</span><br><span class="line">WS(config-if-vlan100)#ipv6 address 2001::192:168:100:2/112</span><br><span class="line">WS(config-if-vlan100)#ipv6 route rip</span><br><span class="line">WS(config-if-vlan100)#int vlan30</span><br><span class="line">WS(config-if-vlan30)#ipv6 address 2001:30::254/64</span><br><span class="line">WS(config-if-vlan30)#no ipv6 nd suppress-ra</span><br><span class="line">WS(config-if-vlan30)#ipv6 route rip</span><br><span class="line">WS(config-if-vlan30)#ipv6 nd ra-lifetime 7200</span><br></pre></td></tr></table></figure>
<p>配置RIPng：<br>PIR就是ipv6的PIR，所有路由规则与IPv4 RIPv2基本相同，不同之处是IPv4 RIPv2使用UDP端口520，而RIPng使用UDP端口521，IPv4 RIPv2数据包更新使用的地址224.0.0.9，而RIPng使用的更新地址是FF02::9。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">CS配置：</span><br><span class="line">CS(config)#router ipv6 rip</span><br><span class="line">CS(config)#INT VL30</span><br><span class="line">CS(config-if-vlan30)#ipv6 router rip</span><br><span class="line">CS(config)#int vlan100</span><br><span class="line">CS(config-if-vlan100)#ipv6 address 2001:100::254/64</span><br><span class="line">CS(config-if-vlan100)#ipv6 route rip</span><br><span class="line"></span><br><span class="line">WS配置：</span><br><span class="line">WS(config)#router ipv6 rip</span><br><span class="line">WS(config-if-vlan50)#int vl100</span><br><span class="line">WS(config-if-vlan100)#ipv6 add 2001:100::253/64</span><br><span class="line">WS(config-if-vlan100)#ipv6 rou rip</span><br><span class="line">WS(config-if-vlan100)#int vlan50</span><br><span class="line">WS(config-if-vlan50)#ipv6 route rip</span><br></pre></td></tr></table></figure>
<h4 id="6-尽可能加大CS与防火墙FW之间的带宽"><a href="#6-尽可能加大CS与防火墙FW之间的带宽" class="headerlink" title="6.尽可能加大CS与防火墙FW之间的带宽"></a>6.尽可能加大CS与防火墙FW之间的带宽</h4><p>;配置使总部VLAN40业务的用户访问IDC SERVER的数据流经过FW 10.1.0.254, IDC SERVER返回数据流经过FW 10.2.0.254，且对双向数据流开启所有安全防护，参数和行为为默认; </p>
<p>Port-Channel端口聚合 在前面已经配置<br>Speed-duplex auto      #设置1000Base-TX或100Base端口的速录和双工模式<br>                #no命令恢复缺省值<br>                #缺省：自动协商速度和双工（auto）<br>                #此命令只可以设置1000Base-TX，对1000Base-FX无效<br>                要改变FX接口需要用negotiation命令<br>（1000Base-TX是千兆双绞线端口以太网    1000Base-FX是千兆光纤端口以太网）</p>
<p>启用FW的攻击防护策略</p>
<p><img src="https://1240-img.oss-cn-chengdu.aliyuncs.com/img-time/2022-12/202303271334052.png" alt="image-20230327133455953"></p>
<p>配置VLAN40的用户和internet的地址簿，创建策略</p>
<p><img src="https://1240-img.oss-cn-chengdu.aliyuncs.com/img-time/2022-12/202303271606787.png" alt="image-20230327160645740"></p>
<p><img src="https://1240-img.oss-cn-chengdu.aliyuncs.com/img-time/2022-12/202303271606974.png" alt="image-20230327160656931"></p>
<p>反向也是一样配置</p>
<p><img src="https://1240-img.oss-cn-chengdu.aliyuncs.com/img-time/2022-12/202303271607062.png" alt="image-20230327160713026"></p>
<h4 id="7-FW、CS、WS之间配置OSPF"><a href="#7-FW、CS、WS之间配置OSPF" class="headerlink" title="7.FW、CS、WS之间配置OSPF"></a>7.FW、CS、WS之间配置OSPF</h4><p>area 0 开启基于链路的MD5认证，密钥自定义,传播访问INTERNET默认路由；</p>
<p>首先是防火墙，需要注意进入防火墙的路由配置模式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">FW(config)#ip vrouter trust-vr			#防火墙进入路由配置模式</span><br><span class="line">FW(config-vrouter)#router ospf</span><br><span class="line">FW(config-router)#router-id 1.1.1.1</span><br><span class="line">FW(config-router)#network 10.1.0.0.252/30 area 0</span><br><span class="line">FW(config-router)#network 10.2.0.252/30 area 0</span><br><span class="line">FW(config-router)#network 200.1.1.0/28 area 0</span><br><span class="line">FW(config-router)#area 0 authentication message-digest	#设置OSPF认证模式为消息</span><br><span class="line">FW(config-router)#exit</span><br><span class="line">FW(config-vrouter)#exit</span><br><span class="line">FW(config)#int aggregate1.113			#进入聚集子接口</span><br><span class="line">FW(config-if-agg1.9)#ip ospf authentication message-digest</span><br><span class="line">FW(config-if-agg1.9)#ip ospf message-digest-key 1 md5 1240	#设置密匙id为1，密匙为1240</span><br><span class="line">FW(config)#int aggregate1.114</span><br><span class="line">FW(config-if-agg1.91)#ip ospf authentication message-digest</span><br><span class="line">FW(config-if-agg1.91)#ip ospf message-digest-key 1 md5 1240</span><br></pre></td></tr></table></figure>
<p>然后是三层交换机：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">CS(config)#router ospf 1</span><br><span class="line">CS(config-router)#ospf router-id 2.2.2.2</span><br><span class="line">CS(config-router)#network 10.1.0.252/30 area 0</span><br><span class="line">CS(config-router)#network 10.2.0.252/30 area 0</span><br><span class="line">CS(config-router)#network 10.5.0.252/30 area 0</span><br><span class="line">CS(config-router)#network 10.6.0.252/30 area 0</span><br><span class="line">CS(config-router)#network 192.168.100.0/30 area 0</span><br><span class="line">CS(config-router)#area 0 authentication message-digest </span><br><span class="line">CS(config)#int vlan 100</span><br><span class="line">CS(config-if-vlan100)#ip ospf authentication message-digest</span><br><span class="line">CS(config-if-vlan100)#ip ospf message-digest-key 1 md5 0 1240</span><br><span class="line">CS(config-if-vlan100)#interface Vlan113</span><br><span class="line">CS(config-if-vlan113)#ip ospf authentication message-digest</span><br><span class="line">CS(config-if-vlan113)#ip ospf message-digest-key 1 md5 0 1240</span><br><span class="line">CS(config-if-vlan113)#interface Vlan114</span><br><span class="line">CS(config-if-vlan114)#ip ospf authentication message-digest</span><br><span class="line">CS(config-if-vlan114)#ip ospf message-digest-key 1 md5 0 1240</span><br><span class="line">CS(config-if-vlan114)#interface Vlan115</span><br><span class="line">CS(config-if-vlan115)#ip ospf authentication message-digest</span><br><span class="line">CS(config-if-vlan115)#ip ospf message-digest-key 1 md5 0 1240</span><br><span class="line">CS(config-if-vlan115)#interface Vlan116</span><br><span class="line">CS(config-if-vlan116)#ip ospf authentication message-digest</span><br><span class="line">CS(config-if-vlan116)#ip ospf message-digest-key 1 md5 0 1240</span><br></pre></td></tr></table></figure>
<p>WS:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">WS(config)#router ospf 1</span><br><span class="line">WS(config-router)#ospf router-id 3.3.3.3</span><br><span class="line">WS(config-router)#area 0 authentication message-digest</span><br><span class="line">WS(config-router)#network 10.5.0.252/30 area 0</span><br><span class="line">WS(config-router)#network 10.6.0.252/30 area 0</span><br><span class="line">WS(config-router)#network 192.168.100.0/30 area 0</span><br><span class="line">WS(config-router)#interface Vlan100</span><br><span class="line">WS(config-if-vlan100)#ip ospf authentication message-digest</span><br><span class="line">WS(config-if-vlan100)#ip ospf message-digest-key 1 md5 0 1240</span><br><span class="line">WS(config-if-vlan100)#interface Vlan115</span><br><span class="line">WS(config-if-vlan115)#ip ospf authentication message-digest</span><br><span class="line">WS(config-if-vlan115)#ip ospf message-digest-key 1 md5 0 1240</span><br><span class="line">WS(config-if-vlan115)#interface Vlan116</span><br><span class="line">WS(config-if-vlan116)#ip ospf authentication message-digest</span><br><span class="line">WS(config-if-vlan116)#ip ospf message-digest-key 1 md5 0 1240</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="8-FW与CS建立两对IBGP邻居关系"><a href="#8-FW与CS建立两对IBGP邻居关系" class="headerlink" title="8.FW与CS建立两对IBGP邻居关系"></a>8.FW与CS建立两对IBGP邻居关系</h4><p>，使用AS 65500，FW上loopback1-4为模拟AS 65500中网络，为保证数据通信的可靠性和负载，完成以下配置，要求如下： </p>
<p>l CS通过BGP到达loopback1,2网路下一跳为10.3.0.254；</p>
<p>l CS通过BGP到达loopback3,4网络下一跳为10.4.0.254；</p>
<p>l 通过BGP实现到达loopback1,2,3,4的网络冗余；</p>
<p>l 使用IP前缀列表匹配上述业务数据流；</p>
<p>l 使用LP属性进行业务选路，只允许使用route-map来改变LP属性、实现路由控制，AS PATH属性可配置的参数数值为：65509</p>
<p>FW配置<br>DCFW(config)# ip vrouter trust-vr             #进入路由模式配置路由<br>DCFW(config-vrouter)# router bgp 65500    </p>
<p>CS:配置前缀列表匹配路由，配置route-map</p>
<p><img src="https://1240-img.oss-cn-chengdu.aliyuncs.com/img-time/2022-12/202303282057734.png" alt="image-20230328205621392"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">CS(config)#	ip prefix-list 1,2 seq 5 permit 10.11.0.0/24</span><br><span class="line">CS(config)#	ip prefix-list 1,2 seq 10 permit 10.12.0.0/24</span><br><span class="line">CS(config)#	ip prefix-list 3,4 seq 5 permit 10.13.0.0/24</span><br><span class="line">CS(config)#	ip prefix-list 3,4 seq 10 permit 10.14.0.0/24</span><br><span class="line">CS(config)#route-map 1,2 per 10 </span><br><span class="line">CS(config-route-map)#match ip add prefix-list 1,2</span><br><span class="line">CS(config-route-map)#set local-preference 200</span><br><span class="line">CS(config)#route-map 1,2 per 20</span><br><span class="line">CS(config-route-map)#exit</span><br><span class="line">CS(config)#route-map 3,4 per 10</span><br><span class="line">CS(config-route-map)#match ip add prefix-list 3,4</span><br><span class="line">CS(config-route-map)#set local-preference 200</span><br><span class="line">CS(config-route-map)#exit</span><br><span class="line">CS(config)#route-map 3,4 per 20</span><br><span class="line">CS(config-route-map)#exit</span><br></pre></td></tr></table></figure>

<p><img src="https://1240-img.oss-cn-chengdu.aliyuncs.com/img-time/2022-12/202303282058633.png" alt="image-20230328205848592"></p>
<p>BGP配置:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">router bgp 65500</span><br><span class="line"> neighbor 10.3.0.254 remote-as 65500</span><br><span class="line"> neighbor 10.3.0.254 update-source 10.1.0.253</span><br><span class="line"> neighbor 10.3.0.254 route-map 1,2 in</span><br><span class="line"> neighbor 10.4.0.254 remote-as 65500</span><br><span class="line"> neighbor 10.4.0.254 update-source 10.2.0.253</span><br><span class="line"> neighbor 10.4.0.254 route-map 3,4 in</span><br></pre></td></tr></table></figure>

<h4 id="9"><a href="#9" class="headerlink" title="9."></a>9.</h4><p>如果CS E1/0/3端口的收包速率超过30000则关闭此端口，恢复时间5分钟，并每隔10分钟对端口的速率进行统计；为了更好地提高数据转发的性能，CS交换中的数据包大小指定为1600字节； </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">int e1/0/3</span><br><span class="line">rate-violation all 30000       </span><br><span class="line">rate-vio con shut re 300 #其实后面的rec 300可以不配置，这是默认配置！但我还是说明一下。</span><br><span class="line">DCRS(config)#mtu 1600       #数据包大小1600字节</span><br><span class="line">DCRS(config)#sflow counter-interval          #配置统计时间</span><br><span class="line">DCRS(config)#port-rate-statistics interval 600   #配置统计时间</span><br></pre></td></tr></table></figure>

<h4 id="10"><a href="#10" class="headerlink" title="10."></a>10.</h4><p>为实现对防火墙的安全管理，在防火墙FW的Trust安全域开启PING,HTTP，SNMP功能（loopback接口除外），Untrust安全域开启SSH、HTTPS功能; </p>
<p>直接在webui开启相应功能<br>用webui需要注意使用webui的接口要开启http</p>
<h4 id="11"><a href="#11" class="headerlink" title="11."></a>11.</h4><p>总部VLAN业务用户通过防火墙访问Internet时，复用公网IP： 200.1.1.28/28，保证每一个源IP产生的所有会话将被映射到同一个固定的IP地址，当有流量匹配本地址转换规则时产生日志信息，将匹配的日志发送至10.51.0.253的 UDP 2000端口；</p>
<p>创建地址簿，使用动态IP多对一，只添加业务用户的VLAN</p>
<p><img src="https://1240-img.oss-cn-chengdu.aliyuncs.com/img-time/2022-12/202303282121227.png" alt="image-20230328212145179"></p>
<p><img src="https://1240-img.oss-cn-chengdu.aliyuncs.com/img-time/2022-12/202303282121671.png" alt="image-20230328212155627"></p>
<h4 id="12"><a href="#12" class="headerlink" title="12."></a>12.</h4><p>配置L2TP VPN，名称为VPN，满足远程办公用户通过拨号登陆访问内网，创建隧道接口为tunnel 1、并加入untrust安全域，地址池名称为AddressPool，LNS 地址池为10.100.253.1/24-10.100.253.100/24，网关为最大可用地址，认证账号skills01,密码skills01； </p>
<img src="https://1240-img.oss-cn-chengdu.aliyuncs.com/img-time/2022-12/202303282122847.png" alt="image-20230328212225810">

<p><img src="https://1240-img.oss-cn-chengdu.aliyuncs.com/img-time/2022-12/202303282122645.png" alt="image-20230328212256610"></p>
<h4 id="13"><a href="#13" class="headerlink" title="13."></a>13.</h4><p>FW 配置禁止所有人在周一至周五工作时间 9：00-18：00 访问京东<a target="_blank" rel="noopener" href="http://www.jd.com/">www.jd.com</a> 和淘宝 <a target="_blank" rel="noopener" href="http://www.taobao.com;相同时间段禁止访问中含有“娱乐”、“新闻”的/">www.taobao.com;相同时间段禁止访问中含有“娱乐”、“新闻”的</a> WEB 页面；</p>
<p><img src="https://1240-img.oss-cn-chengdu.aliyuncs.com/img-time/2022-12/202303282123761.png" alt="image-20230328212328719"></p>
<p><img src="https://1240-img.oss-cn-chengdu.aliyuncs.com/img-time/2022-12/202303282123960.png" alt="image-20230328212338920"></p>
<p><img src="https://1240-img.oss-cn-chengdu.aliyuncs.com/img-time/2022-12/202303282123064.png" alt="image-20230328212349023"></p>
<p><img src="https://1240-img.oss-cn-chengdu.aliyuncs.com/img-time/2022-12/202303282123241.png" alt="image-20230328212356203"></p>
<h4 id="14"><a href="#14" class="headerlink" title="14."></a>14.</h4><p>在FW开启安全网关的TCP SYN包检查功能，只有检查收到的包为TCP SYN包后，才建立连接；配置所有的TCP数据包每次能够传输的最大数据分段为1460，尽力减少网络分片；配置对TCP三次握手建立的时间进行检查，如果在1分钟内未完成三次握手，则断掉该连接；</p>
<p>MSS就是TCP数据包每次能够传输的最大量</p>
<p><img src="https://1240-img.oss-cn-chengdu.aliyuncs.com/img-time/2022-12/202303282124282.png" alt="image-20230328212412234"></p>
<h4 id="15"><a href="#15" class="headerlink" title="15."></a>15.</h4><p>为保证总部Internet出口线路，在FW上使用相关技术，通过ping监控外网网关地址，监控对象名称为Track，每隔5S发送探测报文，连续10次收不到监测报文，就认为线路故障，直接关闭外网接口。FW要求内网每个IP限制会话数量为300；</p>
<p><img src="https://1240-img.oss-cn-chengdu.aliyuncs.com/img-time/2022-12/202303282124518.png" alt="image-20230328212427481"></p>
<p><img src="https://1240-img.oss-cn-chengdu.aliyuncs.com/img-time/2022-12/202303282124899.png" alt="image-20230328212438856"></p>
<h4 id="16"><a href="#16" class="headerlink" title="16."></a>16.</h4><p>Internet端有一分支结构路由器，需要在总部防火墙FW上完成以下预配，保证总部与分支机构的安全连接：</p>
<p>防火墙FW与Internet端路由器202.5.17.2建立GRE隧道，并使用IPSec保护GRE隧道，保证分支结构中2.2.2.2与总部VLAN40安全通信。</p>
<p>第一阶段  采用pre-share认证 加密算法:3DES；</p>
<p>第二阶段  采用ESP协议， 加密算法:3DES，预设共享秘钥: skills01</p>
<h4 id="17"><a href="#17" class="headerlink" title="17."></a>17.</h4><p>已知原AP管理地址为10.81.0.0/15，为了避免地址浪费请重新规划和配置IP地址段，要求如下：</p>
<p>l 使用原AP所在网络进行地址划分；</p>
<p>l 现无线用户VLAN 10中需要127个终端，无线用户VLAN 20需要50个终端；</p>
<p>l WS上配置DHCP，管理VLAN为VLAN101,为AP下发管理地址，网段中第一个可用地址为AP管理地址，最后一个可用地址为WS管理地址，保证完成AP二层注册；为无线用户VLAN10,20下发IP地址，最后一个可用地址为网关； </p>
<p>VLAN10需要127+3个ip 网络号，广播号，交换机<br>Vlan10的ip划分：<br>VLAN10  ip 10.80.0.0/24  网络号10.80.0.1 交换机10.80.0.254</p>
<p>VLAN20的ip划分：<br>VLAN20  ip 10.80.1.0/26  网络号10.80.1.1 交换机10.80.1.62</p>
<p>WS：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">配置DHCP</span><br><span class="line">Ipv4</span><br><span class="line">  WS(config)#Service dhcp</span><br><span class="line">  WS(config)#ip dhcp pool ap</span><br><span class="line">  WS(dhcp-ap-config)#network-address 10.80.1.66 255.255.255.252</span><br><span class="line">  WS(dhcp-ap-config)#default-route 10.80.1.66</span><br><span class="line">Ipv6</span><br><span class="line">  WS(config)#vlan 21</span><br><span class="line">  WS(config)#int vlan 21               </span><br><span class="line">  WS(config-if-vlan21)#ipv6 address 2001:10:81::/112</span><br><span class="line">  WS(config-if-vlan21)#no ipv6 nd suppress-ra 		#开启路由通告</span><br><span class="line">  WS(config-if-vlan21)#ipv6 nd managed-config-flag 	#无地址配置时主机应使用 </span><br><span class="line"></span><br><span class="line">DHCPv6协议</span><br><span class="line">WS(config)#ipv6 enable			#开启ipv6</span><br><span class="line">WS(config)#service dhcpv6  		#开启dhcp的ipv6功能</span><br><span class="line">WS(config)#ipv6 dhcp pool vlan21</span><br><span class="line">WS(dhcpv6-vlan21-config)#network-address 2001:10:81:: 112</span><br><span class="line"></span><br><span class="line">设置AP</span><br><span class="line">WS(config)#int ethernet 1/0/21	#连接ap的口</span><br><span class="line">WS(config-if-ethernet1/0/21)#switchport mode trunk 	#设置为trunk</span><br><span class="line">WS(config-if-ethernet1/0/21)#switchport trunk native	#设置为native</span><br><span class="line">WS(config)#wireless    	#进入无线配置</span><br><span class="line">WS(config)#enable	#开启无线功能</span><br><span class="line">WS(config-wireless)#static-ip 10.80.1.66	#给AC配置管理地址</span><br><span class="line">WS(config-wireless)#no auto-ip-assign 	#关闭自动选举，如果不关	会自动选举之前的	vlan10,20,30</span><br><span class="line">WS(config-wireless)#ap authentication none	#ap的认证方式改为不认证</span><br><span class="line">WS(config-wireless)#discovery vlan-list 101	#改为二层注册，三层注册	为ip-list</span><br></pre></td></tr></table></figure>

<h4 id="18"><a href="#18" class="headerlink" title="18."></a>18.</h4><p>在NETWORK下配置SSID，需求如下：</p>
<p>l NETWORK 1下设置SSID 2022skills-2.4G，VLAN10，加密模式为wpa-personal,其口令为skills01；</p>
<p>l NETWORK 20下设置SSID 2022skills-5G，VLAN20不进行认证加密,做相应配置隐藏该SSID, 只使用倒数第一个可用VAP发送5.0G信号； </p>
<p>设置SSID<br>IPv4<br>DCWS-6028(config-wireless)# network 1    #进入一个网络[1-1024]<br>DCWS-6028(config-network)#ssid 2022skills-2.4G      #设置wifi名称<br>DCWS-6028(config-network)#vlan 10    #配置默认的VLAN<br>DCWS-6028(config-network)#security mode wpa-personal     #配置加密模式<br>DCWS-6028(config-network)#wpa key skills01    #配置wifi密码<br>DCWS-6028(config-wireless)#ap profile 1    #绑定一个profile[1-1024]<br>DCWS-6028(config-ap-profile)#radio 1    #指定网络频段1是2.4g，2    是5g<br>DCWS-6028(config-ap-profile-radio)#vap 0<br>DCWS-6028(config-ap-profile-vap)#network 1    #绑定网络1<br>DCWS-6028(config-ap-profile-vap)#enable             #开启<br>DCWS-6028#wireless ap profile apply 1    #下发network配置</p>
<h4 id="19"><a href="#19" class="headerlink" title="19."></a>19.</h4><p>配置一个SSID 2022skills_IPv6，属于VLAN21用于IPv6无线测试，用户接入无线网络时需要采用基于WPA-personal加密方式，其口令为“skills01”，该网络中的用户从WS DHCP获取IPv6地址，地址范围为：2001:10:81::/112;</p>
<h4 id="20"><a href="#20" class="headerlink" title="20."></a>20.</h4><p>NETWORK 1开启内置portal+本地认证的认证方式，账号为GUEST密码为123456,保障无线信息的覆盖性，无线AP的发射功率设置为90%。禁止MAC地址为80-45-DD-77-CC-48的无线终端连接;</p>
<h4 id="21"><a href="#21" class="headerlink" title="21."></a>21.</h4><p>通过配置防止多AP和WS相连时过多的安全认证连接而消耗CPU资源，检测到AP与WS在10分钟内建立连接5次就不再允许继续连接，两小时后恢复正常;</p>
<p>无线模式下配置<br>wireless ap anti-flood interval 10<br>wireless ap anti-flood max-conn-count 5<br>wireless ap anti-flood agetime 120</p>
<h4 id="22"><a href="#22" class="headerlink" title="22."></a>22.</h4><p>为方便合理使用带宽，要求针对SSID为“2022skills-2.4”下的用户进行带宽控制。对用户上行速率没有限制，但是针对下行速率要求用户的带宽为2Mbps，在最大带宽可以达到4Mbps;</p>
<ol start="23">
<li><p>配置所有Radio接口：AP在收到错误帧时，将不再发送ACK帧；打开AP组播广播突发限制功能；开启Radio的自动信道调整，每天上午10:00触发信道调整功能;</p>
</li>
<li><p>配置所有无线接入用户相互隔离，Network模式下限制每天早上0点到4点禁止终端接入，开启ARP抑制功能； </p>
</li>
<li><p>配置当AP上线，如果WS中储存的Image版本和AP的Image版本号不同时，会触发AP自动升级；配置AP发送向无线终端表明AP存在的帧时间间隔为1秒；配置AP失败状态超时时间及探测到的客户端状态超时时间都为2小时;</p>
</li>
<li><p>在公司总部的BC上配置，设备部署方式为透明模式。增加非admin账户skills01，密码skills01，该账户仅用于用户查询设备的日志信息和统计信息；要求对内网访问Internet全部应用进行日志记录。</p>
</li>
<li><p>为日志查询的时间准确性，要求在BC上配置NTP服务，NTP服务器设定为中国科学院国家授时中心(ntp.ntsc.ac.cn)。</p>
</li>
<li><p>在公司总部的BC上配置，在工作日（每周一到周五上班）期间针对所有无线网段访问互联网进行审计，如果发现访问互联网的无线用户就断网20分钟，不限制其他用户在工作日（每周一到周五上班）期间访问互联网。</p>
</li>
<li><p>BC 配置应用“即时聊天”，在周一至周五8：00-20：00监控内网中所有用户的QQ账号使用记录，并保存QQ聊天记录数据包；</p>
</li>
<li><p>BC配置内容管理，对邮件内容包含“协议”、“投诉”字样的邮件，记录且邮件报警。</p>
</li>
<li><p>BC上配置报警邮箱，邮件服务器IP为172.16.10.33，端口号为25，账号为:skills01,密码: skills01，最大记录数量为50，同时把报警邮件抄送给Manager@ chinaskills.com;</p>
</li>
<li><p>使用BC对内网所有上网用户进行上网本地认证，要求认证后得用户4小时候重新认证，并且对HTTP服务器172.16.10.45的80端口进行免认证；</p>
</li>
<li><p>BC上配置用户识别功能,对内网所有IP地址进行身份识别；</p>
</li>
</ol>
<h4 id="34-在公司总部的WAF上配置，设备部署方式为透明模式。"><a href="#34-在公司总部的WAF上配置，设备部署方式为透明模式。" class="headerlink" title="34. 在公司总部的WAF上配置，设备部署方式为透明模式。"></a>34. 在公司总部的WAF上配置，设备部署方式为透明模式。</h4><p>要求对内网HTTP服务器172.16.10.45/32进行安全防护;</p>
<p>在Webui界面配置<br>35. 为更好对服务器172.16.10.45进行防护，我们定期对服务器进行Web漏洞扫描，来及时修改我们的防护规则。</p>
<ol start="36">
<li><p>方便日志的保存和查看，需要在把WAF上攻击日志、访问日志、DDoS日志以JSON格式发给IP地址为172.16.10.200的日志服务器上;</p>
</li>
<li><p>在WAF上配置基础防御功能，开启SQL注入、XXS攻击、信息泄露等防御功能，要求针对这些攻击阻断并发送邮件告警;</p>
</li>
<li><p>在WAF上针对HTTP服务器进行URL最大个数为10，Cookies最大个数为30，Host最大长度为1024，Accept最大长度64等参数校验设置，设置严重级别为中级，超出校验数值阻断并发送邮件告警;</p>
</li>
<li><p>在WAF上保护HTTP服务器上的<a target="_blank" rel="noopener" href="http://www.2022skills.com网站爬虫攻击,从而影响服务器性能,设置严重级别为高级,一经发现攻击阻断并发送邮件告警/">www.2022skills.com网站爬虫攻击，从而影响服务器性能，设置严重级别为高级，一经发现攻击阻断并发送邮件告警</a>;</p>
</li>
<li><p>为防止<a target="_blank" rel="noopener" href="http://www.2022skills.com网站资源被其他网站利用,通过waf对资源链接进行保护,通过referer方式检测,设置严重级别为中级,一经发现阻断并发送邮件告警/">www.2022skills.com网站资源被其他网站利用，通过WAF对资源链接进行保护，通过Referer方式检测，设置严重级别为中级，一经发现阻断并发送邮件告警</a>;</p>
</li>
</ol>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://12404.top">医疗兵</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://12404.top/2023/03/21/2023-03-21%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E7%AE%A1%E7%90%86%E4%B8%8E%E8%AF%84%E4%BC%B0%E5%AD%A6%E4%B9%A0%E8%BF%87%E7%A8%8B/">https://12404.top/2023/03/21/2023-03-21%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E7%AE%A1%E7%90%86%E4%B8%8E%E8%AF%84%E4%BC%B0%E5%AD%A6%E4%B9%A0%E8%BF%87%E7%A8%8B/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://12404.top" target="_blank">医疗兵的博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://1240-img.oss-cn-chengdu.aliyuncs.com/img/%E9%BB%91%E8%89%B2.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/2023/02/28/%E7%BD%91%E7%BB%9C%E6%90%AD%E5%BB%BA%E3%80%90%E5%8D%8F%E8%AE%AE%E3%80%91%E7%AE%80%E5%8D%95%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86%E5%8D%8F%E8%AE%AE/"><img class="next-cover" src="https://1240-img.oss-cn-chengdu.aliyuncs.com/img/%E9%BB%91%E8%89%B2.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info"></div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://s3.bmp.ovh/imgs/2022/09/20/1ecb950bcff7fba0.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">医疗兵</div><div class="author-info__description">个人博客</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">22</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">19</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">5</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BE%E5%A4%87%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-number">1.</span> <span class="toc-text">设备初始化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#IP%E5%9C%B0%E5%9D%80%E8%A1%A8"><span class="toc-number">2.</span> <span class="toc-text">IP地址表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%BB%E5%8A%A11%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B9%B3%E5%8F%B0%E6%90%AD%E5%BB%BA"><span class="toc-number">3.</span> <span class="toc-text">任务1：网络平台搭建</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E9%98%B2%E7%81%AB%E5%A2%99%E9%85%8D%E7%BD%AE%E5%90%8D%E7%A7%B0%EF%BC%8C%E6%8E%A5%E5%8F%A3%EF%BC%8CIP%E5%9C%B0%E5%9D%80"><span class="toc-number">3.1.</span> <span class="toc-text">1.防火墙配置名称，接口，IP地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E4%B8%89%E5%B1%82%E4%BA%A4%E6%8D%A2%E6%9C%BA%E9%85%8D%E7%BD%AE%E5%90%8D%E7%A7%B0%EF%BC%8CVLAN%E5%B9%B6%E9%85%8D%E7%BD%AE%E7%AB%AF%E5%8F%A3%EF%BC%8C%E8%AE%BE%E7%BD%AEIP%E5%9C%B0%E5%9D%80"><span class="toc-number">3.2.</span> <span class="toc-text">2.三层交换机配置名称，VLAN并配置端口，设置IP地址</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%BB%E5%8A%A12%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E8%AE%BE%E5%A4%87%E9%85%8D%E7%BD%AE%E4%B8%8E%E9%98%B2%E6%8A%A4"><span class="toc-number">4.</span> <span class="toc-text">任务2：网络安全设备配置与防护</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-CS%E5%BC%80%E5%90%AFtelnet%E7%99%BB%E5%BD%95%E5%8A%9F%E8%83%BD"><span class="toc-number">4.1.</span> <span class="toc-text">1.CS开启telnet登录功能</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%80%BB%E9%83%A8%E4%BA%A4%E6%8D%A2%E6%9C%BASW%E9%85%8D%E7%BD%AE%E7%AE%80%E5%8D%95%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86%E5%8D%8F%E8%AE%AE"><span class="toc-number">4.1.1.</span> <span class="toc-text">2.总部交换机SW配置简单网络管理协议</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%AF%B9CS%E4%B8%8AVLAN40%E5%BC%80%E5%90%AF%E4%BB%A5%E4%B8%8B%E5%AE%89%E5%85%A8%E6%9C%BA%E5%88%B6%EF%BC%9A"><span class="toc-number">4.1.2.</span> <span class="toc-text">3.对CS上VLAN40开启以下安全机制：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E5%8B%92%E7%B4%A2%E8%A0%95%E8%99%AB%E7%97%85%E6%AF%92%E5%B8%AD%E5%8D%B7%E5%85%A8%E7%90%83"><span class="toc-number">4.1.3.</span> <span class="toc-text">4.勒索蠕虫病毒席卷全球</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-CS%E9%85%8D%E7%BD%AEIPv6%E5%9C%B0%E5%9D%80"><span class="toc-number">4.1.4.</span> <span class="toc-text">5.CS配置IPv6地址</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-%E5%B0%BD%E5%8F%AF%E8%83%BD%E5%8A%A0%E5%A4%A7CS%E4%B8%8E%E9%98%B2%E7%81%AB%E5%A2%99FW%E4%B9%8B%E9%97%B4%E7%9A%84%E5%B8%A6%E5%AE%BD"><span class="toc-number">4.1.5.</span> <span class="toc-text">6.尽可能加大CS与防火墙FW之间的带宽</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-FW%E3%80%81CS%E3%80%81WS%E4%B9%8B%E9%97%B4%E9%85%8D%E7%BD%AEOSPF"><span class="toc-number">4.1.6.</span> <span class="toc-text">7.FW、CS、WS之间配置OSPF</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-FW%E4%B8%8ECS%E5%BB%BA%E7%AB%8B%E4%B8%A4%E5%AF%B9IBGP%E9%82%BB%E5%B1%85%E5%85%B3%E7%B3%BB"><span class="toc-number">4.1.7.</span> <span class="toc-text">8.FW与CS建立两对IBGP邻居关系</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9"><span class="toc-number">4.1.8.</span> <span class="toc-text">9.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10"><span class="toc-number">4.1.9.</span> <span class="toc-text">10.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#11"><span class="toc-number">4.1.10.</span> <span class="toc-text">11.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#12"><span class="toc-number">4.1.11.</span> <span class="toc-text">12.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#13"><span class="toc-number">4.1.12.</span> <span class="toc-text">13.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#14"><span class="toc-number">4.1.13.</span> <span class="toc-text">14.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#15"><span class="toc-number">4.1.14.</span> <span class="toc-text">15.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#16"><span class="toc-number">4.1.15.</span> <span class="toc-text">16.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#17"><span class="toc-number">4.1.16.</span> <span class="toc-text">17.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#18"><span class="toc-number">4.1.17.</span> <span class="toc-text">18.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#19"><span class="toc-number">4.1.18.</span> <span class="toc-text">19.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#20"><span class="toc-number">4.1.19.</span> <span class="toc-text">20.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#21"><span class="toc-number">4.1.20.</span> <span class="toc-text">21.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#22"><span class="toc-number">4.1.21.</span> <span class="toc-text">22.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#34-%E5%9C%A8%E5%85%AC%E5%8F%B8%E6%80%BB%E9%83%A8%E7%9A%84WAF%E4%B8%8A%E9%85%8D%E7%BD%AE%EF%BC%8C%E8%AE%BE%E5%A4%87%E9%83%A8%E7%BD%B2%E6%96%B9%E5%BC%8F%E4%B8%BA%E9%80%8F%E6%98%8E%E6%A8%A1%E5%BC%8F%E3%80%82"><span class="toc-number">4.1.22.</span> <span class="toc-text">34. 在公司总部的WAF上配置，设备部署方式为透明模式。</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/03/21/2023-03-21%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E7%AE%A1%E7%90%86%E4%B8%8E%E8%AF%84%E4%BC%B0%E5%AD%A6%E4%B9%A0%E8%BF%87%E7%A8%8B/" title="信息安全管理与评估学习过程"><img src="https://1240-img.oss-cn-chengdu.aliyuncs.com/img/%E9%BB%91%E8%89%B2.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="信息安全管理与评估学习过程"/></a><div class="content"><a class="title" href="/2023/03/21/2023-03-21%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E7%AE%A1%E7%90%86%E4%B8%8E%E8%AF%84%E4%BC%B0%E5%AD%A6%E4%B9%A0%E8%BF%87%E7%A8%8B/" title="信息安全管理与评估学习过程">信息安全管理与评估学习过程</a><time datetime="2023-03-21T14:57:00.000Z" title="发表于 2023-03-21 22:57:00">2023-03-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/02/28/%E7%BD%91%E7%BB%9C%E6%90%AD%E5%BB%BA%E3%80%90%E5%8D%8F%E8%AE%AE%E3%80%91%E7%AE%80%E5%8D%95%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86%E5%8D%8F%E8%AE%AE/" title="无题"><img src="https://1240-img.oss-cn-chengdu.aliyuncs.com/img/%E9%BB%91%E8%89%B2.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无题"/></a><div class="content"><a class="title" href="/2023/02/28/%E7%BD%91%E7%BB%9C%E6%90%AD%E5%BB%BA%E3%80%90%E5%8D%8F%E8%AE%AE%E3%80%91%E7%AE%80%E5%8D%95%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86%E5%8D%8F%E8%AE%AE/" title="无题">无题</a><time datetime="2023-02-28T15:21:48.659Z" title="发表于 2023-02-28 23:21:48">2023-02-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/11/28/Redhat%E3%80%90%E6%9C%8D%E5%8A%A1%E3%80%91apache%E8%99%9A%E6%8B%9F%E5%8C%96%E4%B8%BB%E6%9C%BA%E7%9A%84%E9%85%8D%E7%BD%AE/" title="无题"><img src="https://1240-img.oss-cn-chengdu.aliyuncs.com/img/%E9%BB%91%E8%89%B2.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无题"/></a><div class="content"><a class="title" href="/2022/11/28/Redhat%E3%80%90%E6%9C%8D%E5%8A%A1%E3%80%91apache%E8%99%9A%E6%8B%9F%E5%8C%96%E4%B8%BB%E6%9C%BA%E7%9A%84%E9%85%8D%E7%BD%AE/" title="无题">无题</a><time datetime="2022-11-28T08:04:02.259Z" title="发表于 2022-11-28 16:04:02">2022-11-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/11/22/Redhat%E3%80%90%E6%9C%8D%E5%8A%A1%E3%80%91http%E6%9C%8D%E5%8A%A1%E7%9A%84%E9%85%8D%E7%BD%AE/" title="无题"><img src="https://1240-img.oss-cn-chengdu.aliyuncs.com/img/%E9%BB%91%E8%89%B2.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无题"/></a><div class="content"><a class="title" href="/2022/11/22/Redhat%E3%80%90%E6%9C%8D%E5%8A%A1%E3%80%91http%E6%9C%8D%E5%8A%A1%E7%9A%84%E9%85%8D%E7%BD%AE/" title="无题">无题</a><time datetime="2022-11-22T05:14:04.280Z" title="发表于 2022-11-22 13:14:04">2022-11-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/11/22/Redhat%E3%80%90%E6%9C%8D%E5%8A%A1%E3%80%91DNS%E6%9C%8D%E5%8A%A1%E7%9A%84%E9%85%8D%E7%BD%AE/" title="无题"><img src="https://1240-img.oss-cn-chengdu.aliyuncs.com/img/%E9%BB%91%E8%89%B2.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无题"/></a><div class="content"><a class="title" href="/2022/11/22/Redhat%E3%80%90%E6%9C%8D%E5%8A%A1%E3%80%91DNS%E6%9C%8D%E5%8A%A1%E7%9A%84%E9%85%8D%E7%BD%AE/" title="无题">无题</a><time datetime="2022-11-22T05:13:34.683Z" title="发表于 2022-11-22 13:13:34">2022-11-22</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2023 By 医疗兵</div><div class="footer_custom_text">你看到底了</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"></div><div class="aplayer no-destroy" data-id="7060949064" data-server="netease" data-type="playlist" data-fixed="true" data-autoplay="false" data-order="random" data-volume="0.5"> </div><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  typeof preloader === 'object' && preloader.initLoading()
  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html><div id="sakana-widget" style="position:fixed;bottom:10px;right:10px;"></div><script>function initSakanaWidget() {
new SakanaWidget().mount('#sakana-widget');
}</script><script async="" onload="initSakanaWidget()" src="https://cdn.jsdelivr.net/npm/sakana-widget@2.2.1/lib/sakana.min.js"></script>